{{#> layout }}
  <center><h2>Upload</h2></center>

  <p style="line-height: 1.8em;">
    An uploaded key can be retrieved by its fingerprint.<br />
    After upload, you can also make it searchable by e-mail address.
  </p>

  <form action="/vks/v1/publish" method="POST" enctype="multipart/form-data">
    <div class="upload">
      <input type="file" id="keytext" name="keytext" autofocus class="fileUpload" placeholder="Your public key"/>
      <button type="submit" class="uploadButton button smallButton">
        <img src="/assets/upload.svg" style="width: 1em;">
      </button>
    </div>
  </form>

  {{#if show_help}}
  <p>
    You can delete an uploaded key <a href="/manage">here</a>.
  </p>

  <p>If you're using GnuPG you can use the following snippet to export your
    public key.<br />
    This will create a file called mykey.pgp that you can upload here.
  </p>
  <center><pre><code class="snippet">gpg --export your_address@example.org &gt; mykey.pgp</code></pre></center>
  {{else}}
  <p>
    You can delete an uploaded key <a href="/manage">here</a>.
    Need help <a href="/publish?guide=true">exporting your key to a file</a>?
  </p>
  {{/if}}

  <script>
    var body = document.getElementsByTagName("body")[0];

     body.addEventListener('dragover', function(e) {
        e.preventDefault();
        e.stopPropagation();
      }, false);

      body.addEventListener('drop', function(e) {
        e.preventDefault();
        e.stopPropagation();
        if (e.dataTransfer) {
          document.getElementById('keytext').files = e.dataTransfer.files;
        }
    }, false);
  </script>
{{/layout}}
